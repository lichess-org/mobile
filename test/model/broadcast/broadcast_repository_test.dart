import 'package:fast_immutable_collections/fast_immutable_collections.dart';
import 'package:flutter_test/flutter_test.dart';
import 'package:http/testing.dart';
import 'package:lichess_mobile/src/model/broadcast/broadcast.dart';
import 'package:lichess_mobile/src/model/broadcast/broadcast_repository.dart';
import 'package:lichess_mobile/src/model/common/http.dart';

import '../../test_container.dart';
import '../../test_utils.dart';

void main() {
  group('BroadcastRepository', () {
    test('getBroadcasts', () async {
      final mockClient = MockClient((request) {
        if (request.url.host == 'image.lichess1.org') {
          return mockResponse('', 304);
        }
        if (request.url.path == '/api/broadcast') {
          return mockResponse(
            r'''
{"tour":{"id":"4T5bzEja","name":"Stepan Avagyan Memorial 2024","slug":"stepan-avagyan-memorial-2024","description":"June 10th - 18th | 10-player round-robin | Classical time control | Arjun, Tabatabaei, Sevian, Martirosyan, Bluebaum","createdAt":1718032200512,"url":"https://lichess.org/broadcast/stepan-avagyan-memorial-2024/4T5bzEja","tier":5,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=aaarmstark:relay:4T5bzEja:Q0tek1Ng.jpg&w=800&sig=d4b7e6a81538d9efa548db6a3146e78d5b85ec3d","markup":"<p>The <strong>Stepan Avagyan Memorial 2024</strong> is a 10-player round-robin tournament, held from the 10th to the 18th of June in Jermuk, Armenia.</p>\n<p>Time control is 90 minutes for 40 moves, followed by 30 minutes for the rest of the game, with a 30-second increment from move 1.</p>\n<p><a href=\"http://jermuk-round.chessacademy.am/?lang=en\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr953203.aspx?lan=1&amp;art=1&amp;flag=30&amp;turdet=NO\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n","leaderboard":true},"rounds":[{"id":"QfKZSokl","name":"Round 1","slug":"round-1","createdAt":1718032225049,"finished":true,"startsAt":1718017200000,"url":"https://lichess.org/broadcast/stepan-avagyan-memorial-2024/round-1/QfKZSokl"},{"id":"ksH1vdkc","name":"Round 9","slug":"round-9","createdAt":1718032285984,"startsAt":1718694000000,"url":"https://lichess.org/broadcast/stepan-avagyan-memorial-2024/round-9/ksH1vdkc"},{"id":"wu36i3Xr","name":"Round 8","slug":"round-8","createdAt":1718032269170,"startsAt":1718622000000,"url":"https://lichess.org/broadcast/stepan-avagyan-memorial-2024/round-8/wu36i3Xr"},{"id":"y8ZYve5y","name":"Round 7","slug":"round-7","createdAt":1718032263031,"startsAt":1718535600000,"url":"https://lichess.org/broadcast/stepan-avagyan-memorial-2024/round-7/y8ZYve5y"},{"id":"3BgmTbtE","name":"Round 6","slug":"round-6","createdAt":1718032255765,"startsAt":1718449200000,"url":"https://lichess.org/broadcast/stepan-avagyan-memorial-2024/round-6/3BgmTbtE"},{"id":"SvwfdzEU","name":"Round 5","slug":"round-5","createdAt":1718032250296,"startsAt":1718362800000,"url":"https://lichess.org/broadcast/stepan-avagyan-memorial-2024/round-5/SvwfdzEU"},{"id":"Dn2Nrr9o","name":"Round 4","slug":"round-4","createdAt":1718032244440,"startsAt":1718276400000,"url":"https://lichess.org/broadcast/stepan-avagyan-memorial-2024/round-4/Dn2Nrr9o"},{"id":"5aYkellO","name":"Round 3","slug":"round-3","createdAt":1718032238135,"startsAt":1718190000000,"url":"https://lichess.org/broadcast/stepan-avagyan-memorial-2024/round-3/5aYkellO"},{"id":"BIGlM6xF","name":"Round 2","slug":"round-2","createdAt":1718032231731,"startsAt":1718103600000,"url":"https://lichess.org/broadcast/stepan-avagyan-memorial-2024/round-2/BIGlM6xF"}]}
{"tour":{"id":"YtMYEYu9","name":"UzChess Cup 2024 | Masters","slug":"uzchess-cup-2024--masters","description":"June 6th - 14th | 10-player round-robin | Classical time control | Abdusattorov, Mamedyarov, Vidit, Rapport","createdAt":1717657161219,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/YtMYEYu9","tier":5,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=loepare:relay:YtMYEYu9:7XZpJmew.jpg&w=800&sig=ab68bfc4eb95d54254581f48d4e15e43a07c8da4","markup":"<p>The <strong>UzChess Cup 2024 | Masters</strong> is a 10-player round-robin tournament, held from the 6th to the 14th of May in Tashkent, Uzbekistan.</p>\n<p>Time control is 90 minutes for 40 moves, followed by 30 minutes for the rest of the game, with a 30-second increment from move 1.</p>\n<p><a href=\"https://uzchesss.uz\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr951320.aspx?lan=1&amp;art=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n","leaderboard":true},"rounds":[{"id":"3OKUnbEG","name":"Round 5","slug":"round-5","createdAt":1717657432648,"finished":true,"startsAt":1718014500000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/round-5/3OKUnbEG"},{"id":"wE37DBIa","name":"Round 4","slug":"round-4","createdAt":1717657413836,"finished":true,"startsAt":1717928100000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/round-4/wE37DBIa"},{"id":"2iHGmHsR","name":"Round 3","slug":"round-3","createdAt":1717657405594,"finished":true,"startsAt":1717841700000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/round-3/2iHGmHsR"},{"id":"uFlOk6aF","name":"Round 2","slug":"round-2","createdAt":1717657398029,"finished":true,"startsAt":1717755300000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/round-2/uFlOk6aF"},{"id":"Me9bTOwr","name":"Round 1","slug":"round-1","createdAt":1717654754439,"finished":true,"startsAt":1717668900000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/round-1/Me9bTOwr"},{"id":"hxhBmL5E","name":"Round 9","slug":"round-9","createdAt":1717657471318,"startsAt":1718360100000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/round-9/hxhBmL5E"},{"id":"OZrcSvg2","name":"Round 8","slug":"round-8","createdAt":1717657459172,"startsAt":1718273700000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/round-8/OZrcSvg2"},{"id":"Dl7ojYhE","name":"Round 7","slug":"round-7","createdAt":1717657448506,"startsAt":1718187300000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/round-7/Dl7ojYhE"},{"id":"Mox9znXT","name":"Round 6","slug":"round-6","createdAt":1717657440686,"startsAt":1718100900000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/round-6/Mox9znXT"}]}
{"tour":{"id":"5LW5RS0a","name":"Norway Chess 2024 | Women","slug":"norway-chess-2024--women","description":"May 27th - June 7th | 6-player double round-robin | Classical time control | Wenjun, Tingjie, Humpy, Muzychuk","createdAt":1716681998686,"url":"https://lichess.org/broadcast/norway-chess-2024--women/5LW5RS0a","tier":5,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=aaarmstark:relay:5LW5RS0a:ojUluzwV.jpg&w=800&sig=04f6016728182df2c848394a901f141e084ed0ed","markup":"<p>The <strong>Norway Chess Women's Tournament 2024</strong> is a 6-player double round-robin tournament, held from the 27th of May to the 7th of June in Stavanger, Norway, featuring the current Women's World Champion <a href=\"https://lichess.org/fide/8603006/Ju_Wenjun\">Ju Wenjun</a>, <a href=\"https://lichess.org/fide/8605114/Lei_Tingjie\">Lei Tingjie</a>, <a href=\"https://lichess.org/fide/5008123/Koneru_Humpy\">Koneru Humpy</a>, <a href=\"https://lichess.org/fide/14111330/Muzychuk_Anna\">Anna Muzychuk</a>, <a href=\"https://lichess.org/fide/5091756/Vaishali_Rameshbabu\">R Vaishali</a> and <a href=\"https://lichess.org/fide/1700030/Cramling_Pia\">Pia Cramling</a>.</p>\n<p>Time control is 120 minutes for the entire game with a 10-second increment from move 41.</p>\n<p><a href=\"https://norwaychess.no/en/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://stats.norwaychess.no/2024-women/standings\" rel=\"nofollow noopener noreferrer\">Standings</a> | <a href=\"https://norwaychess.no/en/regulations-3/\" rel=\"nofollow noopener noreferrer\">Regulations</a></p>\n<hr />\n<p>Mutually agreed draws are not allowed until both players have made at least 30 moves.</p>\n<p>In the event of a draw, an Armageddon game is played to determine the winner of the round. Players keep the colour from the classical game. Time control is 10 minutes for White and 7 minutes for Black with a 1-second increment from move 41.</p>\n<hr />\n<h3>Final Standings</h3>\n<p>Players are awarded:</p>\n<ul>\n<li><strong>3</strong> points for <strong>winning</strong> a <strong>classical</strong> game (<strong>W</strong>)</li>\n<li><strong>1</strong> point for <strong>drawing</strong> a <strong>classical</strong> game (<strong>D</strong>)</li>\n<li><strong>0.5</strong> points for <strong>winning</strong> the <strong>Armageddon</strong> game (<strong>Aw</strong>)</li>\n<li><strong>0</strong> points for <strong>losing</strong> a <strong>classical</strong> game (<strong>L</strong>)</li>\n</ul>\n<div class=\"slist-wrapper\">\n<table class=\"slist\">\n<thead>\n<tr><th>Rank</th><th>Player</th><th>Elo</th><th>W</th><th>D</th><th>L</th><th>Aw</th><th>Total</th></tr>\n</thead>\n<tbody>\n<tr><td>1</td><td>GM <a href=\"https://lichess.org/fide/8603006/Ju_Wenjun\">Ju</a></td><td>2559</td><td>3</td><td>7</td><td>0</td><td>6</td><td>19.0</td></tr>\n<tr><td>2</td><td>GM <a href=\"https://lichess.org/fide/14111330/Muzychuk_Anna\">Muzychuk</a></td><td>2505</td><td>2</td><td>8</td><td>0</td><td>4</td><td>16.0</td></tr>\n<tr><td>3</td><td>GM <a href=\"https://lichess.org/fide/8605114/Lei_Tingjie\">Lei</a></td><td>2548</td><td>2</td><td>7</td><td>1</td><td>3</td><td>14.5</td></tr>\n<tr><td>4</td><td>GM <a href=\"https://lichess.org/fide/5091756/Vaishali_Rameshbabu\">Vaishali</a></td><td>2489</td><td>2</td><td>5</td><td>3</td><td>3</td><td>12.5</td></tr>\n<tr><td>5</td><td>GM <a href=\"https://lichess.org/fide/5008123/Koneru_Humpy\">Humpy</a></td><td>2545</td><td>1</td><td>6</td><td>3</td><td>2</td><td>10.0</td></tr>\n<tr><td>6</td><td>GM <a href=\"https://lichess.org/fide/1700030/Cramling_Pia\">Cramling</a></td><td>2449</td><td>0</td><td>7</td><td>3</td><td>2</td><td>8.0</td></tr>\n</tbody>\n</table>\n</div>\n"},"rounds":[{"id":"AsXeSs87","name":"Round 10","slug":"round-10","createdAt":1716681541792,"finished":true,"startsAt":1717772400000,"url":"https://lichess.org/broadcast/norway-chess-2024--women/round-10/AsXeSs87"},{"id":"9iJzQOln","name":"Round 9","slug":"round-9","createdAt":1716681503527,"finished":true,"startsAt":1717686000000,"url":"https://lichess.org/broadcast/norway-chess-2024--women/round-9/9iJzQOln"},{"id":"z7V2vtGH","name":"Round 8","slug":"round-8","createdAt":1716681472192,"finished":true,"startsAt":1717513200000,"url":"https://lichess.org/broadcast/norway-chess-2024--women/round-8/z7V2vtGH"},{"id":"COBUf0DD","name":"Round 7","slug":"round-7","createdAt":1716681411436,"finished":true,"startsAt":1717426800000,"url":"https://lichess.org/broadcast/norway-chess-2024--women/round-7/COBUf0DD"},{"id":"ylUqifgD","name":"Round 6","slug":"round-6","createdAt":1716681379848,"finished":true,"startsAt":1717340400000,"url":"https://lichess.org/broadcast/norway-chess-2024--women/round-6/ylUqifgD"},{"id":"y8zv3DF6","name":"Round 5","slug":"round-5","createdAt":1716681349783,"finished":true,"startsAt":1717254000000,"url":"https://lichess.org/broadcast/norway-chess-2024--women/round-5/y8zv3DF6"},{"id":"EGQRCmE8","name":"Round 4","slug":"round-4","createdAt":1716681322100,"finished":true,"startsAt":1717081200000,"url":"https://lichess.org/broadcast/norway-chess-2024--women/round-4/EGQRCmE8"},{"id":"QTJhGg1m","name":"Round 3","slug":"round-3","createdAt":1716681206009,"finished":true,"startsAt":1716994800000,"url":"https://lichess.org/broadcast/norway-chess-2024--women/round-3/QTJhGg1m"},{"id":"xiL30gik","name":"Round 2","slug":"round-2","createdAt":1716673477425,"finished":true,"startsAt":1716908400000,"url":"https://lichess.org/broadcast/norway-chess-2024--women/round-2/xiL30gik"},{"id":"qdBcMm1h","name":"Round 1","slug":"round-1","createdAt":1716672669495,"finished":true,"startsAt":1716822000000,"url":"https://lichess.org/broadcast/norway-chess-2024--women/round-1/qdBcMm1h"}]}
{"tour":{"id":"dL263i9c","name":"Madrid Chess Festival | Closed B","slug":"madrid-chess-festival--closed-b","description":"June 10th – 15th | 10-player round-robin | Classical time control","createdAt":1718026583776,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-b/dL263i9c","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=aaarmstark:relay:dL263i9c:icX79ChU.jpg&w=800&sig=30fcca3fca49edd72fb7bd37e10a95bc80412aa9","markup":"<p>The <strong>Madrid Chess Festival | Closed B</strong> is a 10-player round-robin tournament, held from the 10th to the 15th of June in Madrid, Spain.</p>\n<p>Time control is 90 minutes for the entire game, with a 30-second increment from move 1.</p>\n<p><a href=\"https://www.ajedrezdetorneo.com/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://info64.org/madrid-chess-festival-cerrado-b\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n<hr />\n<p><em>Photo by <a href=\"https://www.pexels.com/photo/photo-of-city-during-dawn-3757144/\" rel=\"nofollow noopener noreferrer\">Alex Azabache</a></em></p>\n","leaderboard":true},"rounds":[{"id":"bhcIx0Ep","name":"Round 1","slug":"round-1","createdAt":1718025869809,"finished":true,"startsAt":1718031600000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-b/round-1/bhcIx0Ep"},{"id":"Uc8IEzLC","name":"Round 9","slug":"round-9","createdAt":1718026301474,"startsAt":1718438400000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-b/round-9/Uc8IEzLC"},{"id":"h9Tb0ooM","name":"Round 8","slug":"round-8","createdAt":1718026209938,"startsAt":1718377200000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-b/round-8/h9Tb0ooM"},{"id":"7Zy9N1sy","name":"Round 7","slug":"round-7","createdAt":1718026179621,"startsAt":1718352000000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-b/round-7/7Zy9N1sy"},{"id":"TVCcnsvY","name":"Round 6","slug":"round-6","createdAt":1718026141650,"startsAt":1718290800000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-b/round-6/TVCcnsvY"},{"id":"FR8tqVTy","name":"Round 5","slug":"round-5","createdAt":1718026050193,"startsAt":1718204400000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-b/round-5/FR8tqVTy"},{"id":"fcrThYbZ","name":"Round 4","slug":"round-4","createdAt":1718025987618,"startsAt":1718179200000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-b/round-4/fcrThYbZ"},{"id":"ooRU4Wvm","name":"Round 3","slug":"round-3","createdAt":1718025953998,"startsAt":1718118000000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-b/round-3/ooRU4Wvm"},{"id":"SvIiXvlt","name":"Round 2","slug":"round-2","createdAt":1718025925794,"startsAt":1718092800000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-b/round-2/SvIiXvlt"}]}
{"tour":{"id":"fSrKEpZp","name":"Madrid Chess Festival | Closed A","slug":"madrid-chess-festival--closed-a","description":"June 10th – 15th | 10-player round-robin | Classical time control","createdAt":1718026474333,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-a/fSrKEpZp","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=aaarmstark:relay:fSrKEpZp:A9DaJjZd.jpg&w=800&sig=5a5ad8c9edd035a929a3dc494978afa3f93d0bfe","markup":"<p>The <strong>Madrid Chess Festival | Closed A</strong> is a 10-player round-robin tournament, held from the 10th to the 15th of June in Madrid, Spain.</p>\n<p>Time control is 90 minutes for the entire game, with a 30-second increment from move 1.</p>\n<p><a href=\"https://www.ajedrezdetorneo.com/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://info64.org/madrid-chess-festival-cerrado-a\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n<hr />\n<p><em>Photo by <a href=\"https://www.pexels.com/photo/photo-of-city-during-dawn-3757144/\" rel=\"nofollow noopener noreferrer\">Alex Azabache</a></em></p>\n","leaderboard":true},"rounds":[{"id":"r575eBSd","name":"Round 1","slug":"round-1","createdAt":1718025869809,"finished":true,"startsAt":1718031600000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-a/round-1/r575eBSd"},{"id":"s9OczBM0","name":"Round 9","slug":"round-9","createdAt":1718026301474,"startsAt":1718438400000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-a/round-9/s9OczBM0"},{"id":"tvOPV3My","name":"Round 8","slug":"round-8","createdAt":1718026209938,"startsAt":1718377200000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-a/round-8/tvOPV3My"},{"id":"3V3icGiq","name":"Round 7","slug":"round-7","createdAt":1718026179621,"startsAt":1718352000000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-a/round-7/3V3icGiq"},{"id":"0TaXuRY2","name":"Round 6","slug":"round-6","createdAt":1718026141650,"startsAt":1718290800000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-a/round-6/0TaXuRY2"},{"id":"E7yFiwbR","name":"Round 5","slug":"round-5","createdAt":1718026050193,"startsAt":1718204400000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-a/round-5/E7yFiwbR"},{"id":"Ewv5zSsf","name":"Round 4","slug":"round-4","createdAt":1718025987618,"startsAt":1718179200000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-a/round-4/Ewv5zSsf"},{"id":"zLGbwCrg","name":"Round 3","slug":"round-3","createdAt":1718025953998,"startsAt":1718118000000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-a/round-3/zLGbwCrg"},{"id":"f1OcHivs","name":"Round 2","slug":"round-2","createdAt":1718025925794,"startsAt":1718092800000,"url":"https://lichess.org/broadcast/madrid-chess-festival--closed-a/round-2/f1OcHivs"}]}
{"tour":{"id":"r0Nxc6ac","name":"Madrid Chess Festival | Open","slug":"madrid-chess-festival--open","description":"June 10th – 15th | 9-round Swiss | Classical time control","createdAt":1718025810742,"url":"https://lichess.org/broadcast/madrid-chess-festival--open/r0Nxc6ac","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=aaarmstark:relay:r0Nxc6ac:cmKQQtal.jpg&w=800&sig=b18e19f8ae2829d60ba996bdf59677a41a37a39a","markup":"<p>The <strong>Madrid Chess Festival | Open</strong> is a 9-round Swiss tournament, held from the 10th to the 15th of June in Madrid, Spain.</p>\n<p>Time control is 90 minutes for the entire game, with a 30-second increment from move 1.</p>\n<p><a href=\"https://www.ajedrezdetorneo.com/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://info64.org/madrid-chess-festival-open\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n<hr />\n<p><em>Photo by <a href=\"https://www.pexels.com/photo/photo-of-city-during-dawn-3757144/\" rel=\"nofollow noopener noreferrer\">Alex Azabache</a></em></p>\n"},"rounds":[{"id":"uHTODrDr","name":"Round 1","slug":"round-1","createdAt":1718025869809,"finished":true,"startsAt":1718031600000,"url":"https://lichess.org/broadcast/madrid-chess-festival--open/round-1/uHTODrDr"},{"id":"5yoJmxB7","name":"Round 9","slug":"round-9","createdAt":1718026301474,"startsAt":1718438400000,"url":"https://lichess.org/broadcast/madrid-chess-festival--open/round-9/5yoJmxB7"},{"id":"Q0Nnx8Dg","name":"Round 8","slug":"round-8","createdAt":1718026209938,"startsAt":1718377200000,"url":"https://lichess.org/broadcast/madrid-chess-festival--open/round-8/Q0Nnx8Dg"},{"id":"6ANKcfaV","name":"Round 7","slug":"round-7","createdAt":1718026179621,"startsAt":1718352000000,"url":"https://lichess.org/broadcast/madrid-chess-festival--open/round-7/6ANKcfaV"},{"id":"NK0VuL7X","name":"Round 6","slug":"round-6","createdAt":1718026141650,"startsAt":1718290800000,"url":"https://lichess.org/broadcast/madrid-chess-festival--open/round-6/NK0VuL7X"},{"id":"oiR6kvGw","name":"Round 5","slug":"round-5","createdAt":1718026050193,"startsAt":1718204400000,"url":"https://lichess.org/broadcast/madrid-chess-festival--open/round-5/oiR6kvGw"},{"id":"LH8XqNle","name":"Round 4","slug":"round-4","createdAt":1718025987618,"startsAt":1718179200000,"url":"https://lichess.org/broadcast/madrid-chess-festival--open/round-4/LH8XqNle"},{"id":"Bfb8FE89","name":"Round 3","slug":"round-3","createdAt":1718025953998,"startsAt":1718118000000,"url":"https://lichess.org/broadcast/madrid-chess-festival--open/round-3/Bfb8FE89"},{"id":"r2XhvnnP","name":"Round 2","slug":"round-2","createdAt":1718025925794,"startsAt":1718092800000,"url":"https://lichess.org/broadcast/madrid-chess-festival--open/round-2/r2XhvnnP"}]}
{"tour":{"id":"A7SHNH32","name":"Asian Youth Championships 2024 | Rapid G8","slug":"asian-youth-championships-2024--rapid-g8","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717979960999,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g8/A7SHNH32","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>The <strong>Asian Youth Championships 2024 | Rapid G8</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr954952.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"BHHV11l8","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g8/round-4/BHHV11l8"},{"id":"8uFUFHQb","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g8/round-3/8uFUFHQb"},{"id":"XpjbFkyj","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g8/round-2/XpjbFkyj"},{"id":"zv8LA8gJ","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g8/round-1/zv8LA8gJ"},{"id":"u1ZjMpLE","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g8/round-7/u1ZjMpLE"},{"id":"h8jeI1bz","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g8/round-6/h8jeI1bz"},{"id":"gItCRnZt","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g8/round-5/gItCRnZt"}]}
{"tour":{"id":"5DIgIGAf","name":"Asian Youth Championships 2024 | Rapid G10","slug":"asian-youth-championships-2024--rapid-g10","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717979759885,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g10/5DIgIGAf","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>Rapid G10 BROADCAST <strong>NOT</strong> FUNCTIONING</p>\n<p>The <strong>Asian Youth Championships 2024 | Rapid G10</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr954955.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"yJrGToxK","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g10/round-7/yJrGToxK"},{"id":"P2bf6mHv","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g10/round-6/P2bf6mHv"},{"id":"96wCrxw3","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g10/round-5/96wCrxw3"},{"id":"Um4u7CvO","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g10/round-4/Um4u7CvO"},{"id":"eWOk0WHF","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g10/round-3/eWOk0WHF"},{"id":"kaeH33Sc","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g10/round-2/kaeH33Sc"},{"id":"rx6Op2Km","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g10/round-1/rx6Op2Km"}]}
{"tour":{"id":"OVxghBri","name":"Asian Youth Championships 2024 | Rapid G12","slug":"asian-youth-championships-2024--rapid-g12","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717979552677,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g12/OVxghBri","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>The <strong>Asian Youth Championships 2024 | Rapid G12</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr955010.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"TBDsqflv","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g12/round-3/TBDsqflv"},{"id":"tCkaqFqR","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g12/round-2/tCkaqFqR"},{"id":"onhJ7qvj","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g12/round-1/onhJ7qvj"},{"id":"RUiXamKV","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g12/round-7/RUiXamKV"},{"id":"m4IFd52k","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g12/round-6/m4IFd52k"},{"id":"0QX0BlSC","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g12/round-5/0QX0BlSC"},{"id":"9tQt6FZb","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g12/round-4/9tQt6FZb"}]}
{"tour":{"id":"jTipKGuC","name":"Asian Youth Championships 2024 | Rapid G14","slug":"asian-youth-championships-2024--rapid-g14","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717979301167,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g14/jTipKGuC","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>The <strong>Asian Youth Championships 2024 | Rapid G14</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr955012.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"XEJvY3D2","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g14/round-4/XEJvY3D2"},{"id":"2zcNlBEf","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g14/round-3/2zcNlBEf"},{"id":"LThLwd1v","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g14/round-2/LThLwd1v"},{"id":"gYg1BS1h","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g14/round-1/gYg1BS1h"},{"id":"d3Tm3c1X","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g14/round-7/d3Tm3c1X"},{"id":"Gr7fHIcW","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g14/round-6/Gr7fHIcW"},{"id":"vg6QiNTT","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g14/round-5/vg6QiNTT"}]}
{"tour":{"id":"L1AnS7L7","name":"Asian Youth Championships 2024 | Rapid G16","slug":"asian-youth-championships-2024--rapid-g16","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717979061553,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g16/L1AnS7L7","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>The <strong>Asian Youth Championships 2024 | Rapid G16</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr955013.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"z6zWnCHd","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g16/round-4/z6zWnCHd"},{"id":"MENkLiNN","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g16/round-3/MENkLiNN"},{"id":"2VWoVaH9","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g16/round-2/2VWoVaH9"},{"id":"9Odh9SLT","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g16/round-1/9Odh9SLT"},{"id":"keIdmeXL","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g16/round-7/keIdmeXL"},{"id":"4MsKElj3","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g16/round-6/4MsKElj3"},{"id":"64hkNZi1","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g16/round-5/64hkNZi1"}]}
{"tour":{"id":"x1foGxoz","name":"Asian Youth Championships 2024 | Rapid G18","slug":"asian-youth-championships-2024--rapid-g18","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717978839461,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g18/x1foGxoz","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>The <strong>Asian Youth Championships 2024 | Rapid G18</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr955014.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"ujAGxbLX","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g18/round-4/ujAGxbLX"},{"id":"BGPDOUfg","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g18/round-3/BGPDOUfg"},{"id":"kuhUpcQ9","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g18/round-2/kuhUpcQ9"},{"id":"6I5TvWlU","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g18/round-1/6I5TvWlU"},{"id":"JjCnZ96b","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g18/round-7/JjCnZ96b"},{"id":"XZbxlHzk","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g18/round-6/XZbxlHzk"},{"id":"mL0m0UGb","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-g18/round-5/mL0m0UGb"}]}
{"tour":{"id":"QiLoJl89","name":"Asian Youth Championships 2024 | Rapid U8","slug":"asian-youth-championships-2024--rapid-u8","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717978593233,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u8/QiLoJl89","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>The <strong>Asian Youth Championships 2024 | Rapid U8</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr954940.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"8naiH31U","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u8/round-4/8naiH31U"},{"id":"ZRIt56v2","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u8/round-3/ZRIt56v2"},{"id":"YwcfEkcX","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u8/round-2/YwcfEkcX"},{"id":"y3Xo6596","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u8/round-1/y3Xo6596"},{"id":"RiQirzgV","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u8/round-7/RiQirzgV"},{"id":"Nwz9lz9n","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u8/round-6/Nwz9lz9n"},{"id":"vGx9Bmkq","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u8/round-5/vGx9Bmkq"}]}
{"tour":{"id":"7raYNEY9","name":"Asian Youth Championships 2024 | Rapid U10","slug":"asian-youth-championships-2024--rapid-u10","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717978298765,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u10/7raYNEY9","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>Rapid U10 BROADCAST <strong>NOT</strong> FUNCTIONING</p>\n<p>The <strong>Asian Youth Championships 2024 | Rapid U10</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr954945.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"8WPtvFaF","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u10/round-7/8WPtvFaF"},{"id":"0iLzdT3X","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u10/round-6/0iLzdT3X"},{"id":"QO9sdh8y","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u10/round-5/QO9sdh8y"},{"id":"9unM11YN","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u10/round-4/9unM11YN"},{"id":"ORtU3Uzv","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u10/round-3/ORtU3Uzv"},{"id":"2w06fvgO","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u10/round-2/2w06fvgO"},{"id":"DSbge5sh","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u10/round-1/DSbge5sh"}]}
{"tour":{"id":"AlG0qICc","name":"Asian Youth Championships 2024 | Rapid U12","slug":"asian-youth-championships-2024--rapid-u12","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717977206155,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u12/AlG0qICc","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>The <strong>Asian Youth Championships 2024 | Rapid U12</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr954947.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"oZkgG2kV","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u12/round-4/oZkgG2kV"},{"id":"RkAyzXLn","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u12/round-3/RkAyzXLn"},{"id":"4EpT8Uo9","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u12/round-2/4EpT8Uo9"},{"id":"KWXMeq6q","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u12/round-1/KWXMeq6q"},{"id":"JbQ4a2UU","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u12/round-7/JbQ4a2UU"},{"id":"JtjnP4Th","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u12/round-6/JtjnP4Th"},{"id":"j2QzGcLF","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u12/round-5/j2QzGcLF"}]}
{"tour":{"id":"bwXtxgFt","name":"Asian Youth Championships 2024 | Rapid U14","slug":"asian-youth-championships-2024--rapid-u14","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717976675912,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u14/bwXtxgFt","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>The <strong>Asian Youth Championships 2024 | Rapid U14</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr954949.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"GCbRQ6pQ","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u14/round-4/GCbRQ6pQ"},{"id":"QRJDvHpO","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u14/round-3/QRJDvHpO"},{"id":"cpusStRk","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u14/round-2/cpusStRk"},{"id":"QIN85by1","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u14/round-1/QIN85by1"},{"id":"3kA105Mj","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u14/round-7/3kA105Mj"},{"id":"JAC17X1m","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u14/round-6/JAC17X1m"},{"id":"5dC6RSld","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u14/round-5/5dC6RSld"}]}
{"tour":{"id":"lrUlRYy7","name":"Asian Youth Championships 2024 | Rapid U16","slug":"asian-youth-championships-2024--rapid-u16","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717970328613,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u16/lrUlRYy7","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>The <strong>Asian Youth Championships 2024 | Rapid U16</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr954950.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"gkYRmcpX","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u16/round-4/gkYRmcpX"},{"id":"vskw5IAo","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u16/round-3/vskw5IAo"},{"id":"jAPAYnxm","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u16/round-2/jAPAYnxm"},{"id":"KSoXFlpW","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u16/round-1/KSoXFlpW"},{"id":"RLz0c4m3","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u16/round-7/RLz0c4m3"},{"id":"S6whLMzj","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u16/round-6/S6whLMzj"},{"id":"s9juVYHb","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u16/round-5/s9juVYHb"}]}
{"tour":{"id":"TacAAjx5","name":"Asian Youth Championships 2024 | Rapid U18","slug":"asian-youth-championships-2024--rapid-u18","description":"June 10th - 11th  | 7-round Swiss | Rapid time control","createdAt":1717968406518,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u18/TacAAjx5","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:TacAAjx5:dHhiwSLL.jpg&w=800&sig=e8968b6c487e16e3c64c37711b52b0a8571c1f7e","markup":"<p>The <strong>Asian Youth Championships 2024 | Rapid U18</strong> is a 7-round Swiss, held from the 10th to the 11th of June in Almaty, Kazakhstan.</p>\n<p>Time control is 15 minutes for the entire game with a 10-second increment from move 1.</p>\n<p><a href=\"https://aycc2024.kazchess.kz/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr954951.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"jv3zdVnu","name":"Round 4","slug":"round-4","createdAt":1717970132826,"finished":true,"startsAt":1718017500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u18/round-4/jv3zdVnu"},{"id":"GNArNJ2u","name":"Round 3","slug":"round-3","createdAt":1717970098661,"finished":true,"startsAt":1718013900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u18/round-3/GNArNJ2u"},{"id":"MPMg9OlF","name":"Round 2","slug":"round-2","createdAt":1717968948444,"finished":true,"startsAt":1718003100000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u18/round-2/MPMg9OlF"},{"id":"eFYJB1Jy","name":"Round 1","slug":"round-1","createdAt":1717968451913,"finished":true,"startsAt":1717999500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u18/round-1/eFYJB1Jy"},{"id":"P6vEFxoS","name":"Round 7","slug":"round-7","createdAt":1717970261324,"startsAt":1718100300000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u18/round-7/P6vEFxoS"},{"id":"hi3aTYAv","name":"Round 6","slug":"round-6","createdAt":1717970226488,"startsAt":1718089500000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u18/round-6/hi3aTYAv"},{"id":"TYOiFldl","name":"Round 5","slug":"round-5","createdAt":1717970162760,"startsAt":1718085900000,"url":"https://lichess.org/broadcast/asian-youth-championships-2024--rapid-u18/round-5/TYOiFldl"}]}
{"tour":{"id":"0J8Rtc51","name":"Grand Prix Romania 2024 | Stage 1 Cluj","slug":"grand-prix-romania-2024--stage-1-cluj","description":"June 13th - 14th  | 10-round Swiss | Rapid time control","createdAt":1717829188297,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/0J8Rtc51","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=iacaster:relay:0J8Rtc51:PNLPBQKV.jpg&w=800&sig=b9b6d00467d9248a68400e1e87a40ff33e6ffaef","markup":"<p>The <strong>Grand Prix Romania 2024 | Stage 1 Cluj</strong> is a 10-round Swiss, held from the 13th to the 14th of June in Cluj-Napoca, Romania.</p>\n<p>Time control is 15 minutes for the entire game with a 5-second increment from move 1.</p>\n<p><a href=\"https://www.romaniagp.ro/events/cluj/\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr929358.aspx?lan=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n"},"rounds":[{"id":"BDCejotf","name":"Round 10","slug":"round-10","createdAt":1717831466523,"startsAt":1718374500000,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/round-10/BDCejotf"},{"id":"SSqxsCvC","name":"Round 9","slug":"round-9","createdAt":1717831442217,"startsAt":1718370600000,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/round-9/SSqxsCvC"},{"id":"NvSddRvk","name":"Round 8","slug":"round-8","createdAt":1717831421498,"startsAt":1718366400000,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/round-8/NvSddRvk"},{"id":"WP5jcE6m","name":"Round 7","slug":"round-7","createdAt":1717831396788,"startsAt":1718356500000,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/round-7/WP5jcE6m"},{"id":"3fJOFKxa","name":"Round 6","slug":"round-6","createdAt":1717831371754,"startsAt":1718352600000,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/round-6/3fJOFKxa"},{"id":"Vu8GGLj8","name":"Round 5","slug":"round-5","createdAt":1717831337762,"startsAt":1718348400000,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/round-5/Vu8GGLj8"},{"id":"hIs8frPM","name":"Round 4","slug":"round-4","createdAt":1717831310733,"startsAt":1718299500000,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/round-4/hIs8frPM"},{"id":"zZMpfav6","name":"Round 3","slug":"round-3","createdAt":1717831013302,"startsAt":1718295600000,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/round-3/zZMpfav6"},{"id":"ibBgX2DE","name":"Round 2","slug":"round-2","createdAt":1717830955723,"startsAt":1718291700000,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/round-2/ibBgX2DE"},{"id":"fIuKDX6g","name":"Round 1","slug":"round-1","createdAt":1717829419694,"startsAt":1718287200000,"url":"https://lichess.org/broadcast/grand-prix-romania-2024--stage-1-cluj/round-1/fIuKDX6g"}]}
{"tour":{"id":"vntwlrw6","name":"UzChess Cup 2024 | Futures","slug":"uzchess-cup-2024--futures","description":"June 6th - 14th | 10-player round-robin | Classical time control","createdAt":1717657899551,"url":"https://lichess.org/broadcast/uzchess-cup-2024--futures/vntwlrw6","tier":4,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=loepare:relay:d6fsqyMV:PWixHww8.jpg&w=800&sig=4ab22b884e216af3d2e79ffcf1c7e88d1b97c92d","markup":"<p>The <strong>UzChess Cup 2024 | Futures</strong> is a 10-player round-robin tournament, held from the 6th to the 14th of May in Tashkent, Uzbekistan.</p>\n<p>Time control is 90 minutes for 40 moves, followed by 30 minutes for the rest of the game, with a 30-second increment from move 1.</p>\n<p><a href=\"https://uzchesss.uz\" rel=\"nofollow noopener noreferrer\">Official Website</a> | <a href=\"https://chess-results.com/tnr951333.aspx?lan=1&amp;art=1\" rel=\"nofollow noopener noreferrer\">Results</a></p>\n","leaderboard":true},"rounds":[{"id":"etUcvRAi","name":"Round 5","slug":"round-5","createdAt":1717657432648,"finished":true,"startsAt":1718014500000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--futures/round-5/etUcvRAi"},{"id":"KFUhO6Yg","name":"Round 4","slug":"round-4","createdAt":1717657413836,"finished":true,"startsAt":1717928100000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--futures/round-4/KFUhO6Yg"},{"id":"J8xEsqHn","name":"Round 3","slug":"round-3","createdAt":1717657405594,"finished":true,"startsAt":1717841700000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--futures/round-3/J8xEsqHn"},{"id":"yYaaU7Zh","name":"Round 2","slug":"round-2","createdAt":1717657398029,"finished":true,"startsAt":1717755300000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--futures/round-2/yYaaU7Zh"},{"id":"jzql4zny","name":"Round 1","slug":"round-1","createdAt":1717654754439,"finished":true,"startsAt":1717668900000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--futures/round-1/jzql4zny"},{"id":"kdpXsEEA","name":"Round 9","slug":"round-9","createdAt":1717657471318,"startsAt":1718360100000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--futures/round-9/kdpXsEEA"},{"id":"kBoa8Hg8","name":"Round 8","slug":"round-8","createdAt":1717657459172,"startsAt":1718273700000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--futures/round-8/kBoa8Hg8"},{"id":"yD48zjwT","name":"Round 7","slug":"round-7","createdAt":1717657448506,"startsAt":1718187300000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--futures/round-7/yD48zjwT"},{"id":"ibWAO1Wn","name":"Round 6","slug":"round-6","createdAt":1717657440686,"startsAt":1718100900000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--futures/round-6/ibWAO1Wn"}]}
''',
            200,
            headers: {'content-type': 'application/x-ndjson; charset=utf-8'},
          );
        }
        return mockResponse('', 404);
      });

      final container = await lichessClientContainer(mockClient);
      final client = container.read(lichessClientProvider);
      final repo = BroadcastRepository(client);

      final response = await repo.getBroadcasts();

      expect(response, isA<IList<Broadcast>>());
      expect(response, 20);
    });

    test('getRound', () async {
      const roundId = '4T5bzEja';
      final mockClient = MockClient((request) {
        if (request.url.path == '/api/broadcast/-/-/$roundId') {
          return mockResponse(
            '''
{"round":{"id":"3OKUnbEG","name":"Round 5","slug":"round-5","createdAt":1717657432648,"finished":true,"startsAt":1718014500000,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/round-5/3OKUnbEG","delay":900},"tour":{"id":"YtMYEYu9","name":"UzChess Cup 2024 | Masters","slug":"uzchess-cup-2024--masters","description":"June 6th - 14th | 10-player round-robin | Classical time control | Abdusattorov, Mamedyarov, Vidit, Rapport","createdAt":1717657161219,"url":"https://lichess.org/broadcast/uzchess-cup-2024--masters/YtMYEYu9","tier":5,"image":"https://image.lichess1.org/display?h=400&op=thumbnail&path=loepare:relay:YtMYEYu9:7XZpJmew.jpg&w=800&sig=ab68bfc4eb95d54254581f48d4e15e43a07c8da4"},"study":{"writeable":false},"games":[{"id":"V9B6PQvc","name":"Abdusattorov, Nodirbek - Grischuk, Alexander","fen":"1q6/1p3k2/3p1p2/QP1P3b/P3P3/5P2/1B3K2/8 b - - 2 41","players":[{"name":"Abdusattorov, Nodirbek","title":"GM","rating":2766,"clock":41000,"fed":"UZB"},{"name":"Grischuk, Alexander","title":"GM","rating":2719,"clock":6000,"fed":"RUS"}],"lastMove":"g3f2","status":"1-0"},{"id":"dMwh2dof","name":"Rapport, Richard - Sarana, Alexey","fen":"7r/2Q5/p3pk2/1p6/2bqB3/8/1P1B2P1/3K4 w - - 14 53","players":[{"name":"Rapport, Richard","title":"GM","rating":2715,"clock":67500,"fed":"ROU"},{"name":"Sarana, Alexey","title":"GM","rating":2712,"clock":132600,"fed":"SRB"}],"lastMove":"e7f6","status":"½-½"},{"id":"iZqz42S3","name":"Vidit, Santosh Gujrathi - Yu, Yangyi","fen":"4r1k1/6p1/1np1rpp1/1pq1P3/5PPB/1PPRQ3/7P/4R2K b - - 0 33","players":[{"name":"Vidit, Santosh Gujrathi","title":"GM","rating":2721,"clock":30200,"fed":"IND"},{"name":"Yu, Yangyi","title":"GM","rating":2715,"clock":38100,"fed":"CHN"}],"lastMove":"e2e3","status":"½-½"},{"id":"5165vQE4","name":"Maghsoodloo, Parham - Sindarov, Javokhir","fen":"7K/8/8/5k2/8/8/8/8 w - - 0 82","players":[{"name":"Maghsoodloo, Parham","title":"GM","rating":2733,"clock":362200,"fed":"IRI"},{"name":"Sindarov, Javokhir","title":"GM","rating":2668,"fed":"UZB"}],"lastMove":"f6f5","status":"½-½"},{"id":"LW0FVC5G","name":"Mamedyarov, Shakhriyar - Yakubboev, Nodirbek","fen":"6k1/p5p1/1np4p/2p2P2/P3R3/2P3P1/r6P/4B1K1 w - - 6 42","players":[{"name":"Mamedyarov, Shakhriyar","title":"GM","rating":2734,"clock":65700,"fed":"AZE"},{"name":"Yakubboev, Nodirbek","title":"GM","rating":2634,"clock":154000,"fed":"UZB"}],"lastMove":"d5b6","status":"½-½"}]}
''',
            200,
            headers: {'content-type': 'application/json; charset=utf-8'},
          );
        }
        return mockResponse('', 404);
      });

      final container = await lichessClientContainer(mockClient);
      final client = container.read(lichessClientProvider);
      final repo = BroadcastRepository(client);

      final response = await repo.getRound(roundId);

      expect(response, isA<IList<BroadcastGameSnapshot>>());
      expect(response.length, 5);
    });
  });
}
